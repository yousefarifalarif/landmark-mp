<div class="container pt-5">
  <ul class="nav nav-tabs ">
    <li class="my-custom-class active">
      <a class="nav-link active" data-toggle="tab" href="#mybooking">My Bookings</a>
    </li>
    <li class="">
      <a class="nav-link" data-toggle="tab" href="#bookedLandmarks">Booked Landmarks</a>
    </li>
  </ul>
  <div class="py-3 tab-content my-padding">
    <div id="mybooking" class="pt-3 tab-pane active">
      <div class="cards">
        <% @bookings.each do |booking| %>
          <div data-aos="zoom-in" data-aos-duration="1000">
            <%= link_to booking_path(booking), class:"card-trip" do %>
              <div class="card-trip">
                <%= cl_image_tag booking.landmark.photo.key %>
                <div class='card-links'>
                  <%= link_to edit_booking_path(booking) do %>
                    <i class="fas fa-pencil-alt"></i>
                  <% end %>
                  <%= link_to booking_path(booking), method: :delete, data: { confirm: 'Are you sure?'} do %>
                    <i class="far fa-trash-alt"></i>
                  <% end %>
                </div>
                <div class="card-trip-infos">
                  <div>
                    <h2><%= booking.landmark.name %></h2>
                    <p><%= booking.landmark.location %></p>
                    <% sum = 0 %>
                    <% count = 0 %>
                    <% booking.landmark.bookings.each do |booking|%>
                    <% if booking.review.present? %>
                    <% sum += booking.review.rating %>
                    <% count +=1 %>
                    <% end %>
                    <% end %>
                  <% (sum / count).times do %>
                  <i class="fas fa-star" style= "color: #EDB867;"></i>
                  <% end %>
                  </div>
                  <h3 class="card-trip-pricing"><%= humanized_money_with_symbol(booking.landmark.price) %> / day</h2>
                </div>
              </div>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>

    <div id="bookedLandmarks" class="pt-3 tab-pane">
      <div class="cards">
        <% @my_booked_landmarks.each do |booking| %>
          <div data-aos="zoom-in" data-aos-duration="1000">
            <%= link_to booking_path(booking), class:"card-trip" do %>
              <div class="card-trip">
                <%= cl_image_tag booking.landmark.photo.key %>
                <% if booking.state == 'pending' %>
                  <div class='card-status pending'><%= booking.state.capitalize %></div>
                <% elsif booking.state == 'accepted' %>
                  <div class='card-status accepted'><%= booking.state.capitalize %></div>
                <% elsif booking.state == 'declined' %>
                  <div class='card-status-bg'> </div>
                  <div class='card-status declined'><%= booking.state.capitalize %></div>
                <% else %>
                <% end %>
                <div class="card-trip-infos">
                  <div>
                    <h2><%= booking.landmark.name %></h2>
                    <p><%= booking.landmark.location %></p>
                    <% sum = 0 %>
                    <% count = 0 %>
                    <% booking.landmark.bookings.each do |booking|%>
                    <% if booking.review.present? %>
                    <% sum += booking.review.rating %>
                    <% count +=1 %>
                    <% end %>
                    <% end %>
                    <% (sum / count).times do %>
                    <i class="fas fa-star" style= "color: #EDB867;"></i>
                    <% end %>
                  </div>
                  <h3 class="card-trip-pricing"><%= humanized_money_with_symbol(booking.landmark.price) %> / day</h2>
                </div>
              </div>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
